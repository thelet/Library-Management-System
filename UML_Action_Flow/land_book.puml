@startuml
start

:User clicks "Lend Book" in LibraryGUI;
:LibraryGUI displays Lend Book Form;

partition FrontEnd {
    :User selects book to lend;
    :User submits the form;
}

partition BackEnd {
    :LibraryGUI validates input;
    if (Input Valid?) then (yes)
        :LibraryGUI calls Library.lendBook(user, book);
        if (Lending Successful?) then (yes)
            :Library updates book availability;
            :Library notifies observers;
            :Logger logs "Book lent";
            :LibraryGUI shows success message;
        else (no)
            :LibraryGUI shows error message;
        endif
    else (no)
        :LibraryGUI shows error message;
    endif
}

stop
@enduml
